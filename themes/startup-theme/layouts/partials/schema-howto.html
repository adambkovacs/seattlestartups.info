{{/*
  HowTo Schema Partial for SEO/GEO

  Usage: Add howto parameter to front matter:
  howto:
    name: "How to Find Free Startup Resources in Seattle"
    totalTime: "PT30M"
    steps:
      - name: "Identify your startup stage"
        text: "Determine whether you're at ideation, validation, or growth stage."
      - name: "Choose resource categories"
        text: "Select from accelerators, mentorship, funding, or coworking."
*/}}

{{ if .Params.howto }}
<!-- GEO_CONTENT: HowTo Schema for step-by-step AI citation -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "@id": "{{ .Permalink }}#howto",
  "name": {{ .Params.howto.name | jsonify }},
  "description": {{ .Description | default .Summary | plainify | jsonify }},
  {{ with .Params.howto.totalTime }}"totalTime": "{{ . }}",{{ end }}
  {{ with .Params.image }}"image": "{{ . | absURL }}",{{ end }}
  "step": [
    {{ range $index, $step := .Params.howto.steps }}
    {{ if $index }},{{ end }}
    {
      "@type": "HowToStep",
      "position": {{ add $index 1 }},
      "name": {{ $step.name | jsonify }},
      "text": {{ $step.text | jsonify }}
      {{ with $step.url }},"url": "{{ . }}"{{ end }}
      {{ with $step.image }},"image": "{{ . | absURL }}"{{ end }}
    }
    {{ end }}
  ]
}
</script>
{{ end }}
