<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}" class="scroll-smooth" x-data="{ darkMode: false }" :class="{ 'dark': darkMode }">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
  <meta name="author" content="{{ .Site.Params.author }}">

  <!-- Open Graph -->
  <meta property="og:title" content="{{ .Title }} | {{ .Site.Title }}">
  <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ .Title }} | {{ .Site.Title }}">
  <meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ .Permalink }}">

  <!-- Robots -->
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

  <!-- Open Graph & Twitter Images -->
  {{ with .Params.image }}
  <meta property="og:image" content="{{ . | absURL }}">
  <meta name="twitter:image" content="{{ . | absURL }}">
  {{ else }}
  <meta property="og:image" content="{{ "images/og-default.png" | absURL }}">
  <meta name="twitter:image" content="{{ "images/og-default.png" | absURL }}">
  {{ end }}
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:locale" content="en_US">

  <!-- Geo Tags for Local SEO -->
  <meta name="geo.region" content="US-WA">
  <meta name="geo.placename" content="Seattle">
  <meta name="geo.position" content="47.6062;-122.3321">
  <meta name="ICBM" content="47.6062, -122.3321">

  <!-- Additional SEO Tags -->
  <meta name="theme-color" content="#0891b2">
  <meta name="apple-mobile-web-app-title" content="Seattle Startups">
  <link rel="apple-touch-icon" href="{{ "images/apple-touch-icon.png" | absURL }}">

  <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

  <!-- Preconnect to external resources for faster loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Compiled Tailwind CSS - No render-blocking CDN -->
  <link rel="stylesheet" href="/css/main.css">

  <!-- Favicon - SVG as primary (modern browsers), ICO fallback removed (old browsers use apple-touch-icon) -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

  <!-- Google Fonts - Async Loading with font-display: swap -->
  <!-- Preload the most critical font weights for LCP -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Montserrat:wght@700;800&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Montserrat:wght@700;800&display=swap" media="print" onload="this.media='all'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Montserrat:wght@700;800&display=swap">
  </noscript>

  <!-- Load additional font weights asynchronously after page load -->
  <script>
    // Load additional font weights after initial render
    if ('requestIdleCallback' in window) {
      requestIdleCallback(function() {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://fonts.googleapis.com/css2?family=Poppins:wght@500;800;900&family=Montserrat:wght@400;500;600;900&family=JetBrains+Mono:wght@400;500&display=swap';
        document.head.appendChild(link);
      });
    } else {
      setTimeout(function() {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://fonts.googleapis.com/css2?family=Poppins:wght@500;800;900&family=Montserrat:wght@400;500;600;900&family=JetBrains+Mono:wght@400;500&display=swap';
        document.head.appendChild(link);
      }, 100);
    }
  </script>

  {{ block "head" . }}{{ end }}

  <!-- GEO Meta Tags for AI Citation Optimization -->
  {{ partial "geo-meta.html" . }}

  <!-- FAQ Schema (if page has FAQ data) -->
  {{ partial "schema-faq.html" . }}

  <!-- HowTo Schema (if page has HowTo data) -->
  {{ partial "schema-howto.html" . }}

  <!-- Structured Data: WebSite Schema with SearchAction (for Google Sitelinks Search Box) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "@id": "{{ .Site.BaseURL }}#website",
    "name": "{{ .Site.Title }}",
    "alternateName": "Seattle Startups Directory",
    "url": "{{ .Site.BaseURL }}",
    "description": "{{ .Site.Params.description }}",
    "inLanguage": "en-US",
    "potentialAction": {
      "@type": "SearchAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "{{ .Site.BaseURL }}resources/?q={search_term_string}"
      },
      "query-input": "required name=search_term_string"
    },
    "publisher": {
      "@id": "{{ .Site.BaseURL }}#organization"
    }
  }
  </script>

  <!-- Structured Data: Organization Schema (for Knowledge Panel) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "@id": "{{ .Site.BaseURL }}#organization",
    "name": "Seattle Startups",
    "alternateName": "SeattleStartups.info",
    "url": "{{ .Site.BaseURL }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ "images/logo.png" | absURL }}",
      "width": 512,
      "height": 512
    },
    "description": "{{ .Site.Params.description }}",
    "foundingLocation": {
      "@type": "Place",
      "name": "Seattle, Washington, USA"
    },
    "areaServed": [
      {"@type": "AdministrativeArea", "name": "King County, Washington"},
      {"@type": "AdministrativeArea", "name": "Snohomish County, Washington"},
      {"@type": "AdministrativeArea", "name": "Pierce County, Washington"},
      {"@type": "AdministrativeArea", "name": "Kitsap County, Washington"},
      {"@type": "AdministrativeArea", "name": "Thurston County, Washington"}
    ],
    "sameAs": [
      "{{ .Site.Params.github }}"
    ],
    "knowsAbout": [
      "Startup Resources",
      "Entrepreneurship",
      "Business Accelerators",
      "Startup Funding",
      "Coworking Spaces",
      "Mentorship Programs",
      "Small Business Development"
    ]
  }
  </script>

  <!-- Structured Data: LocalBusiness Schema (for Local SEO) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "@id": "{{ .Site.BaseURL }}#localbusiness",
    "name": "Seattle Startups Resource Directory",
    "description": "Free startup resource directory serving the Greater Seattle area including King, Snohomish, Pierce, Kitsap, and Thurston counties with 248+ verified resources.",
    "url": "{{ .Site.BaseURL }}",
    "telephone": "",
    "areaServed": {
      "@type": "GeoCircle",
      "geoMidpoint": {
        "@type": "GeoCoordinates",
        "latitude": 47.6062,
        "longitude": -122.3321
      },
      "geoRadius": "100 mi"
    },
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Seattle",
      "addressRegion": "WA",
      "addressCountry": "US"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 47.6062,
      "longitude": -122.3321
    },
    "priceRange": "Free",
    "openingHoursSpecification": {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
      "opens": "00:00",
      "closes": "23:59"
    }
  }
  </script>

  <!-- Structured Data: BreadcrumbList Schema -->
  {{ if not .IsHome }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ .Site.BaseURL }}"
      }
      {{ if .Parent }}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": "{{ .Parent.Title }}",
        "item": "{{ .Parent.Permalink }}"
      }
      ,{
        "@type": "ListItem",
        "position": 3,
        "name": "{{ .Title }}",
        "item": "{{ .Permalink }}"
      }
      {{ else }}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": "{{ .Title }}",
        "item": "{{ .Permalink }}"
      }
      {{ end }}
    ]
  }
  </script>
  {{ end }}
</head>
<body class="font-body antialiased seattle-sky dark:bg-overcast-900 rain-pattern min-h-screen text-overcast-800 dark:text-overcast-200 transition-colors duration-300">
  <!-- BOT_HINT: PAGE_START url="{{ .Permalink }}" type="{{ if .IsHome }}homepage{{ else if .IsSection }}section{{ else }}page{{ end }}" -->
  <!-- BOT_HINT: SITE_NAME="Seattle Startups" TOPIC="startup resources seattle" GEOGRAPHIC_FOCUS="Greater Seattle, Washington" -->

  <!-- Skip to content link -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-sound-500 text-white px-4 py-2 rounded-lg z-50">
    Skip to content
  </a>

  <!-- BOT_HINT: NAVIGATION_START -->
  {{ partial "header.html" . }}
  <!-- BOT_HINT: NAVIGATION_END -->

  <!-- BOT_HINT: MAIN_CONTENT_START title="{{ .Title }}" section="{{ .Section }}" -->
  <main id="main-content" class="min-h-screen" role="main">
    {{ block "main" . }}{{ end }}
  </main>
  <!-- BOT_HINT: MAIN_CONTENT_END -->

  <!-- BOT_HINT: FOOTER_START -->
  {{ partial "footer.html" . }}
  <!-- BOT_HINT: FOOTER_END -->
  <!-- BOT_HINT: PAGE_END -->

  <!-- Mobile menu toggle script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const menuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      const menuOpenIcon = document.getElementById('menu-open-icon');
      const menuCloseIcon = document.getElementById('menu-close-icon');

      if (menuButton && mobileMenu) {
        menuButton.addEventListener('click', function() {
          mobileMenu.classList.toggle('hidden');
          menuOpenIcon.classList.toggle('hidden');
          menuCloseIcon.classList.toggle('hidden');
        });
      }
    });
  </script>

  <!-- Click Tracking for Resource Links -->
  <script>
  (function() {
    // Click tracking for outbound resource links
    const STORAGE_KEY = 'seattle_startups_clicks';

    // Get existing clicks from localStorage
    function getClicks() {
      try {
        return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
      } catch (e) {
        return {};
      }
    }

    // Save click to localStorage
    function saveClick(resourceName, url) {
      const clicks = getClicks();
      const key = resourceName.toLowerCase().replace(/\s+/g, '_');

      if (!clicks[key]) {
        clicks[key] = { name: resourceName, url: url, count: 0, first: new Date().toISOString(), last: null };
      }

      clicks[key].count++;
      clicks[key].last = new Date().toISOString();

      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(clicks));
      } catch (e) {
        console.warn('Click tracking storage failed:', e);
      }

      // Also log to console for debugging
      console.log('[SeattleStartups] Click tracked:', resourceName, url);
    }

    // Attach listeners to all trackable links
    document.addEventListener('DOMContentLoaded', function() {
      const trackedLinks = document.querySelectorAll('[data-track-click]');

      trackedLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
          const resourceName = this.dataset.resourceName || this.textContent.trim();
          const resourceUrl = this.dataset.resourceUrl || this.href;

          saveClick(resourceName, resourceUrl);
        });
      });

      // Also track all resource card clicks
      const resourceCards = document.querySelectorAll('.resource-link');
      resourceCards.forEach(function(link) {
        link.addEventListener('click', function(e) {
          const card = this.closest('[data-resource-card]');
          if (card) {
            const resourceName = card.dataset.title || this.textContent.trim();
            const resourceUrl = this.href;
            saveClick(resourceName, resourceUrl);
          }
        });
      });
    });

    // Expose click data getter for analytics
    window.getSeattleStartupsClicks = getClicks;

    // Log total clicks on page load
    document.addEventListener('DOMContentLoaded', function() {
      const clicks = getClicks();
      const total = Object.values(clicks).reduce((sum, r) => sum + r.count, 0);
      if (total > 0) {
        console.log('[SeattleStartups] Total clicks tracked:', total, 'across', Object.keys(clicks).length, 'resources');
      }
    });
  })();
  </script>

  {{ block "scripts" . }}{{ end }}
</body>
</html>
